(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[302],{262:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>x});var n=s(5155),t=s(5749),i=s(6916),d=s(5462),l=s(9959),c=s(8297),a=s(667),o=s(2115),h=s(6037);function x(){let{storage:e}=(0,i.p)(),{provider:r,chainId:s,accounts:x,isConnected:u,connect:f,ethersSigner:p,ethersReadonlyProvider:j,sameChain:m,sameSigner:g,initialMockChains:v,status:b,error:N}=(0,d.h)(),{instance:y,status:w,error:k}=(0,t.w)({provider:r||"http://localhost:8545",chainId:s||31337,initialMockChains:v,enabled:!0}),C=(0,o.useMemo)(()=>j||new h.FR("http://localhost:8545"),[j]),{contractAddress:R,isDeployed:M,canInteract:V,votings:E,votingResults:_,isLoading:B,message:D,refreshVotings:F}=(0,l.K)({instance:y,fhevmDecryptionSignatureStorage:e,eip1193Provider:r,chainId:s||31337,ethersSigner:p,ethersReadonlyProvider:C,sameChain:m,sameSigner:g});return(0,n.jsx)("div",{className:"min-h-screen bg-background p-8",children:(0,n.jsx)("div",{className:"max-w-4xl mx-auto space-y-6",children:(0,n.jsxs)(c.Zp,{children:[(0,n.jsx)(c.aR,{children:(0,n.jsx)(c.ZB,{children:"ZamaVoting 调试信息"})}),(0,n.jsxs)(c.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"钱包状态:"}),(0,n.jsxs)("p",{children:["连接状态: ",u?"已连接":"未连接"]}),(0,n.jsxs)("p",{children:["状态: ",b]}),(0,n.jsxs)("p",{children:["链ID: ",s||"未知"]}),(0,n.jsxs)("p",{children:["账户: ",(null==x?void 0:x[0])||"无"]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"FHEVM状态:"}),(0,n.jsxs)("p",{children:["状态: ",w]}),(0,n.jsxs)("p",{children:["实例: ",y?"已创建":"未创建"]}),(0,n.jsxs)("p",{children:["错误: ",(null==k?void 0:k.message)||"无"]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"合约状态:"}),(0,n.jsxs)("p",{children:["地址: ",R||"未知"]}),(0,n.jsxs)("p",{children:["已部署: ",M?"是":"否"]}),(0,n.jsxs)("p",{children:["可交互: ",V?"是":"否"]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"投票数据:"}),(0,n.jsxs)("p",{children:["投票数量: ",E.length]}),(0,n.jsxs)("p",{children:["加载中: ",B?"是":"否"]}),(0,n.jsxs)("p",{children:["消息: ",D||"无"]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"投票列表:"}),E.length>0?(0,n.jsx)("div",{className:"mt-2 space-y-2",children:E.map((e,r)=>(0,n.jsxs)("div",{className:"p-3 border rounded-md",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"ID:"})," ",e.id]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"标题:"})," ",e.title]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"选项:"})," ",e.options.join(", ")]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"总票数:"})," ",e.totalVotes]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"状态:"})," ",e.isActive?"进行中":"已结束"]})]},r))}):(0,n.jsx)("p",{className:"text-muted-foreground mt-2",children:"暂无投票数据"})]}),(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)(a.$,{onClick:F,disabled:B,children:"刷新投票数据"}),!u&&(0,n.jsx)(a.$,{onClick:f,disabled:"connecting"===b,children:"连接钱包"})]}),(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(0,n.jsx)("p",{children:"如果投票数据为空，请检查:"}),(0,n.jsxs)("ul",{className:"list-disc list-inside ml-4",children:[(0,n.jsx)("li",{children:"Hardhat节点是否运行在 http://localhost:8545"}),(0,n.jsx)("li",{children:"VotingSystem合约是否已部署"}),(0,n.jsx)("li",{children:"是否已创建投票"}),(0,n.jsx)("li",{children:"FHEVM实例是否正确初始化"})]})]})]})]})})})}},667:(e,r,s)=>{"use strict";s.d(r,{$:()=>c});var n=s(5155),t=s(5016),i=s(3101),d=s(2115);let l=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=(0,d.forwardRef)((e,r)=>{let{className:s,variant:i,size:d,asChild:c=!1,...a}=e;return(0,n.jsx)("button",{className:(0,t.cn)(l({variant:i,size:d,className:s})),ref:r,...a})});c.displayName="Button"},5016:(e,r,s)=>{"use strict";s.d(r,{$B:()=>l,LV:()=>c,cn:()=>i,fU:()=>d});var n=s(2821),t=s(5889);function i(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,t.QP)((0,n.$)(r))}function d(e){return new Date(1e3*e).toLocaleString()}function l(e){let r=e-Math.floor(Date.now()/1e3);if(r<=0)return"Ended";let s=Math.floor(r/86400),n=Math.floor(r%86400/3600),t=Math.floor(r%3600/60);return s>0?"".concat(s,"d ").concat(n,"h"):n>0?"".concat(n,"h ").concat(t,"m"):"".concat(t,"m")}function c(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.slice(0,r+2),"...").concat(e.slice(-r))}},8008:(e,r,s)=>{Promise.resolve().then(s.bind(s,262))},8297:(e,r,s)=>{"use strict";s.d(r,{BT:()=>a,Wu:()=>o,ZB:()=>c,Zp:()=>d,aR:()=>l});var n=s(5155),t=s(5016),i=s(2115);let d=(0,i.forwardRef)((e,r)=>{let{className:s,...i}=e;return(0,n.jsx)("div",{ref:r,className:(0,t.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...i})});d.displayName="Card";let l=(0,i.forwardRef)((e,r)=>{let{className:s,...i}=e;return(0,n.jsx)("div",{ref:r,className:(0,t.cn)("flex flex-col space-y-1.5 p-6",s),...i})});l.displayName="CardHeader";let c=(0,i.forwardRef)((e,r)=>{let{className:s,...i}=e;return(0,n.jsx)("h3",{ref:r,className:(0,t.cn)("text-2xl font-semibold leading-none tracking-tight",s),...i})});c.displayName="CardTitle";let a=(0,i.forwardRef)((e,r)=>{let{className:s,...i}=e;return(0,n.jsx)("p",{ref:r,className:(0,t.cn)("text-sm text-muted-foreground",s),...i})});a.displayName="CardDescription";let o=(0,i.forwardRef)((e,r)=>{let{className:s,...i}=e;return(0,n.jsx)("div",{ref:r,className:(0,t.cn)("p-6 pt-0",s),...i})});o.displayName="CardContent",(0,i.forwardRef)((e,r)=>{let{className:s,...i}=e;return(0,n.jsx)("div",{ref:r,className:(0,t.cn)("flex items-center p-6 pt-0",s),...i})}).displayName="CardFooter"}},e=>{e.O(0,[349,501,874,441,255,358],()=>e(e.s=8008)),_N_E=e.O()}]);