"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[437],{534:(e,s,t)=>{t.d(s,{A:()=>r});let r=(0,t(1847).A)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},1169:(e,s,t)=>{t.d(s,{A:()=>r});let r=(0,t(1847).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},1437:(e,s,t)=>{t.d(s,{Y:()=>u});var r=t(5155),l=t(8297),a=t(667),d=t(5828),n=t(8839),i=t(534),c=t(5229),o=t(1169),x=t(1847);let h=(0,x.A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),m=(0,x.A)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);function u(e){let{voting:s,results:t,isOpen:x,onClose:u,onDecrypt:y,isDecrypting:g=!1,userAddress:b}=e,{t:p}=(0,n.o)();if(!x)return null;let v=async()=>{try{await y(s.id)}catch(e){console.error("Failed to decrypt results:",e)}},j=(()=>{if(!t||0===t.results.length)return null;let e=Math.max(...t.results),r=t.results.findIndex(s=>s===e);return{index:r,option:s.options[r],votes:e}})(),f=b&&s.creator.toLowerCase()===b.toLowerCase();return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)(l.Zp,{className:"w-full max-w-2xl mx-auto max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(i.A,{className:"w-5 h-5 text-primary"}),(0,r.jsx)(l.ZB,{className:"text-lg",children:p("voting.results")})]}),(0,r.jsx)(a.$,{variant:"ghost",size:"icon",onClick:u,children:(0,r.jsx)(c.A,{className:"w-4 h-4"})})]}),(0,r.jsx)(l.BT,{children:s.title})]}),(0,r.jsxs)(l.Wu,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Total Votes:"}),(0,r.jsxs)("p",{className:"flex items-center gap-1",children:[(0,r.jsx)(o.A,{className:"w-4 h-4"}),s.totalVotes]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Status:"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)(d.E,{variant:s.isActive?"success":"warning",children:p(s.isActive?"voting.active":"voting.ended")})})]})]}),t?(0,r.jsxs)("div",{className:"space-y-4",children:[j&&(0,r.jsxs)("div",{className:"p-4 bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-lg dark:from-yellow-900 dark:to-orange-900 dark:border-yellow-800",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(m,{className:"w-5 h-5 text-yellow-600"}),(0,r.jsx)("h3",{className:"font-semibold text-yellow-800 dark:text-yellow-200",children:"Winning Option"})]}),(0,r.jsxs)("p",{className:"text-yellow-700 dark:text-yellow-300",children:[(0,r.jsx)("strong",{children:j.option})," with ",j.votes," votes"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium mb-3",children:"Detailed Results:"}),(0,r.jsx)("div",{className:"space-y-3",children:s.options.map((e,s)=>{let l=t.results[s]||0,a=t.totalVotes>0?(l/t.totalVotes*100).toFixed(1):"0.0",d=(null==j?void 0:j.index)===s;return(0,r.jsxs)("div",{className:"p-4 border rounded-lg ".concat(d?"border-yellow-300 bg-yellow-50 dark:border-yellow-700 dark:bg-yellow-900":"border-border"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"font-medium",children:e}),d&&(0,r.jsx)(m,{className:"w-4 h-4 text-yellow-600"})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"font-semibold",children:[l," votes"]}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:[a,"%"]})]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 dark:bg-gray-700",children:(0,r.jsx)("div",{className:"h-2 rounded-full transition-all duration-500 ".concat(d?"bg-yellow-500":"bg-primary"),style:{width:"".concat(a,"%")}})})]},s)})})]}),(0,r.jsx)("div",{className:"p-4 bg-muted rounded-lg",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Total Votes:"}),(0,r.jsx)("p",{children:t.totalVotes})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Participation:"}),(0,r.jsxs)("p",{children:[t.totalVotes," voters"]})]})]})})]}):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)(h,{className:"w-12 h-12 mx-auto text-muted-foreground mb-2"}),(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Results Not Decrypted"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm mb-2",children:"Click the button below to make results public and decrypt them."}),s.isActive&&(0,r.jsx)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md text-sm text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300 dark:border-yellow-800",children:"⚠️ Note: Voting is still active. Results can only be decrypted after voting ends."})]}),(0,r.jsx)(a.$,{onClick:v,disabled:g,size:"lg",children:g?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"loading-spinner w-4 h-4 mr-2"}),"Decrypting..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h,{className:"w-4 h-4 mr-2"}),"Decrypt Results"]})}),(0,r.jsxs)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md text-sm text-blue-800 dark:bg-blue-900 dark:text-blue-300 dark:border-blue-800",children:["\uD83D\uDD12 Results are encrypted and will be decrypted using FHEVM technology.",f?(0,r.jsx)("div",{className:"mt-2 text-green-700 dark:text-green-300",children:"✅ As the creator, you have default access to decrypt results."}):(0,r.jsx)("div",{className:"mt-2",children:"This process will first make the results publicly decryptable, then decrypt them."})]})]}),(0,r.jsx)("div",{className:"flex justify-end pt-4",children:(0,r.jsx)(a.$,{onClick:u,variant:"outline",children:p("common.back")})})]})]})})}},5828:(e,s,t)=>{t.d(s,{E:()=>n});var r=t(5155),l=t(3101),a=t(5016);let d=(0,l.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",warning:"border-transparent bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",info:"border-transparent bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:t,...l}=e;return(0,r.jsx)("div",{className:(0,a.cn)(d({variant:t}),s),...l})}}}]);